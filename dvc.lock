schema: '2.0'
stages:
  get_ncbi_refseq:
    cmd: bash pipeline/s0.0_get_ncbi_refseq.sh
    deps:
    - path: pipeline/s0.0_get_ncbi_refseq.sh
      md5: 837b5f5eafaeb1bce06b909476276d05
      size: 8151
    outs:
    - path: ./data/refseq
      md5: 7e3fa86ff45297a95e4e235097ca92c7.dir
      size: 52933152676
      nfiles: 16664

  get_bacdive_ogt:
    cmd: python pipeline/s0.1_get_bacdive_ogt.py
    deps:
    - path: ./data/refseq
      md5: 7e3fa86ff45297a95e4e235097ca92c7.dir
      size: 52933152676
      nfiles: 16664
    - path: pipeline/s0.1_get_bacdive_ogt.py
      md5: 2be959a8c38618f0cc0099f7171f190e
      size: 8538
    params:
      pipeline/s0_data_extraction_params.yaml:
        get_bacdive_ogt.n_jobs: 6
        get_bacdive_ogt.n_sample:
    outs:
    - path: ./data/metrics/s0.1_metrics.yaml
      md5: b057c231026ca4b0fa9d2fc8e3307d46
      size: 78
    - path: ./data/taxa/taxa_info_and_ogt.csv
      md5: a5bb1873b2aeac4026516a91dd94c3e1
      size: 3826414
  get_proteins:
    cmd: python pipeline/s1.1_get_protein_sequences.py
    deps:
    - path: ./data/refseq
      md5: 7e3fa86ff45297a95e4e235097ca92c7.dir
      size: 52933152676
      nfiles: 16664
    - path: ./data/taxa/taxa_info_and_ogt.csv
      md5: a5bb1873b2aeac4026516a91dd94c3e1
      size: 3826414
    - path: pipeline/s1.1_get_protein_sequences.py
      md5: 599f96a15b51f8c781131579f68976b6
      size: 4870
    params:
      pipeline/s1_data_processing_params.yaml:
        get_protein_sequences.n_jobs: 2
        get_protein_sequences.n_sample:
    outs:
    - path: ./data/metrics/s1.1_metrics.yaml
      md5: 8c34f4fefe92eac1fc9656ba83be235a
      size: 55
    - path: ./data/taxa/16s_rRNA.csv
      md5: fd367e500fc781453b73a4617ce4075a
      size: 21316764
    - path: ./data/taxa/proteins.csv
      md5: 5fd92574b305f4d652d35cd7bca38ac6
      size: 23950681337
  label_taxa:
    cmd: python pipeline/s1.0_label_taxa.py
    deps:
    - path: ./data/taxa/taxa_info_and_ogt.csv
      md5: a5bb1873b2aeac4026516a91dd94c3e1
      size: 3826414
    - path: pipeline/s1.0_label_taxa.py
      md5: 9344f8ba437e3601b5da3fef110fd827
      size: 3074
    params:
      pipeline/s1_data_processing_params.yaml:
        label_taxa.ogt_determination_method: true ogt only
        label_taxa.ogt_threshold: 33.0
    outs:
    - path: ./data/metrics/s1.0_metrics.yaml
      md5: e3dc1b14e664e4fb162fb0338ca487ee
      size: 27
    - path: ./data/taxa/labels.csv
      md5: af2876df1ff8ba50c8462259da1c280a
      size: 126506
